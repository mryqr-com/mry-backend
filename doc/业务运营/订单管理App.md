# 订单管理

## 本地环境
- 以`15111111111`(密码：11111111)登录本地[码如云自运营页面](http://console.local.mryqr.com/management/my-apps)
- 点击`订单管理`即可进入订单管理页面

## 原理

- 订单实例的所有数据均来自`Order`对象，因此无需担心误删实例导致数据丢失的情况
- 订单实例的自定义编号被系统自动设置为`Order`的ID，用于关联订单实例和`Order`对象并完成数据同步
- 对`Order`的操作将发出领域事件，然后触发数据同步
- 同步数据时，如果`Tenant`对应的租户实例不存在，那么系统将自动创建租户实例
- 对于某个订单实例，你也可以手动同步后台数据
- 对订单实例的操作将通过提交Submission的方式进行，提交Submission后将触发webhook，webhook将调用`Order`中的方法完成对`Order`的操作，之后将发出领域事件进而将数据同步到订单实例

## 操作

- 发货登记：仅对印刷产品订单有效，发货后需要及时完成发货登记以使用户可以自行查询物流信息
- 对公转账：仅对银行转账类型的订单有效，当租户完成转账后，需要及时完成对公转账登记以使订单生效
- 开具发票：仅当用户申请了发票之后操作才有效，开具发票后系统将自动发送邮件给发票接收人
- 微信支付：仅对微信支付类型的订单有效，用于微信支付的自动集成失效的场景
- 退款：仅对支付后的订单有效，在完成实际退款操作后，需要完成该退款登记

## 误删实例解决办法

- 误删实例后，仅需重新手动添加订单实例即可，添加后务必设置实例的自定义编号为`Order`的ID，否则数据将无法同步